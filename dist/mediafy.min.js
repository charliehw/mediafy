/*! 
	mediafy 2013-11-08 
	Author: charliehw
	License: MIT
*/
window.mediafy=window.mediafy||{},function(a){"use strict";a.MediaObject=function(){"string"==typeof arguments[0]?this._elem=document.querySelector(arguments[0]):(this._elem=document.createElement(this._type),"number"==typeof arguments[0]&&"number"==typeof arguments[1]&&(this._elem.width=arguments[0],this._elem.height=arguments[1]),document.body.appendChild(this._elem))},a.MediaObject.prototype={constructor:a.MediaObject,remove:function(){return this._elem.parentNode.removeChild(this.elem),this},toggleVisibility:function(){return this._elem.classList.toggle("hide"),this},get:function(a){return a&&this._elem[a]?this._elem[a]:this._elem},set:function(a,b){return this._elem[a]=b,this}},a.util={extend:function(a,b){a=a||{},b=b||{};for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}},navigator.getMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,a.Video=function(){this._type="video",a.MediaObject.apply(this,Array.prototype.slice.call(arguments,0))},a.Video.prototype=Object.create(a.MediaObject.prototype),a.Video.prototype=a.util.extend(a.Video.prototype,{constructor:a.Video,loadUserMedia:function(a){var b=this;return navigator.getMedia({video:!0},function(c){b._elem.src=window.URL.createObjectURL(c),b._elem.onloadedmetadata=a}),this},play:function(){return this._elem.play(),this},pause:function(){return this._elem.pause(),this}}),a.Canvas=function(){this._type="canvas",a.MediaObject.apply(this,Array.prototype.slice.call(arguments,0))},a.Canvas.prototype=Object.create(a.MediaObject.prototype),a.Canvas.prototype=a.util.extend(a.Canvas.prototype,{constructor:a.Canvas,clear:function(b){return b=b||new a.Coords(this),this.getContext().clearRect(b.x,b.y,b.width,b.height),this},getImageData:function(b){return b=b||new a.Coords(this),this.getContext().getImageData(b.x,b.y,b.width,b.height)},putImage:function(b,c){return c=c||new a.Coords(this),b instanceof a.MediaObject&&(b=b.get()),this.getContext().drawImage(b,c.x,c.y,c.width,c.height),this},getContext:function(a){return(!this._context||a)&&(this._context=this._elem.getContext(a||"2d")),this._context},exportImage:function(){window.open(this._elem.toDataURL("image/png"))}}),a.Coords=function(b){b instanceof a.MediaObject?(this.x=0,this.y=0,this.width=b.get("width"),this.height=b.get("height")):(this.x=b.x,this.y=b.y,this.width=b.width,this.height=b.height)},a.Coords.prototype={constructor:a.Coords,translate:function(a){return this.x+=a[0],this.y+=a[1],this},scale:function(a){return this.width*=a,this.height*=a,this}}}(window.mediafy);